<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Diag'Carbone — Simplifié</title>
		<style>
			*
			{
				margin:0;
				padding:0;
			box-sizing:border-box}

			body
			{
				font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
				background:linear-gradient(135deg,#f5f7fa 0%,#e4e8ec 100%);
				padding:20px;
			min-height:100vh}

			.container
			{
				max-width:900px;
				margin:0 auto;
				background:#fff;
				border-radius:20px;
				box-shadow:0 20px 60px rgba(0,0,0,.1);
			overflow:hidden}

			.header
			{
				background:linear-gradient(135deg,#00B050 0%,#D9D9D9 100%);
				color:#fff;
				padding:30px;
			text-align:center}

			.header h1
			{
				font-size:28px;
			margin-bottom:8px}

			.header p
			{
				opacity:.95;
			font-size:15px}

			.progress-bar
			{
				background:rgba(255,255,255,.2);
				height:8px;
				border-radius:10px;
				margin-top:18px;
			overflow:hidden}

			.progress-fill
			{
				background:#fff;
				height:100%;
				border-radius:10px;
				width:0;
			transition:width .4s ease}

			.content
			{
			padding:28px}

			.section
			{
			display:none}

			.section.active
			{
			display:block}

			.question
			{
				background:#f9fafb;
				border:2px solid #e5e7eb;
				border-radius:12px;
				padding:16px;
			margin-bottom:14px}

			.label
			{
				font-weight:600;
				color:#1f2937;
				margin-bottom:8px;
			display:block}

			.input-text
			{
				width:100%;
				padding:10px 12px;
				border:2px solid #e5e7eb;
				border-radius:8px;
			font-size:14px}

			.options
			{
				display:flex;
				flex-direction:column;
				gap:8px;
			margin-top:6px}

			.option
			{
				display:flex;
				align-items:center;
				gap:10px;
				padding:10px;
				border:2px solid #e5e7eb;
				border-radius:8px;
			cursor:pointer}

			.option input
			{
				width:18px;
			height:18px}

			.option.selected
			{
				background:#dcfce7;
			border-color:#00B050}

			.navigation
			{
				display:flex;
				justify-content:space-between;
				align-items:center;
				margin-top:20px;
				padding-top:16px;
			border-top:2px solid #e5e7eb}

			.btn-nav
			{
				padding:12px 24px;
				border:none;
				border-radius:10px;
				font-weight:600;
				cursor:pointer;
				transition:all .2s;
			font-size:15px}

			.btn-prev
			{
				background:#e5e7eb;
			color:#4b5563}

			.btn-next
			{
				background:#00B050;
			color:white}

			.btn-prev:hover
			{
			background:#d1d5db}

			.btn-next:hover
			{
			background:#16a34a}

			.hidden
			{
			display:none}

			.card
			{
				background:linear-gradient(135deg,#f9fafb,#fff);
				border-radius:16px;
				padding:30px;
			text-align:center}

			.card h2
			{
				color:#1f2937;
			margin-bottom:10px}

			.card p
			{
				color:#374151;
			margin-bottom:20px}

			.info
			{
				display:flex;
				flex-wrap:wrap;
				justify-content:center;
				gap:20px;
			margin-bottom:20px}

			.info div
			{
				background:#fff;
				border:2px solid #e5e7eb;
				border-radius:10px;
				padding:12px 18px;
			min-width:180px}

			.badge
			{
				display:inline-block;
				padding:10px 20px;
				background:#00B050;
				color:#fff;
				border-radius:20px;
			font-weight:600}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="header">
				<h1>Diag'Carbone</h1>
				<p>
					Évaluez votre maturité carbone
				</p>
				<div class="progress-bar">
					<div id="bar" class="progress-fill"></div>
				</div>
			</div>
			<div id="quiz" class="content"></div>
		</div>
		<script>
			const data=[ {
				title:"Description de l'entreprise",questions:[  {
					q:"Quel est le nom de votre entreprise ?",type:"text",key:"nom"
				}
				,  {
					q:"De combien de personnes se compose votre effectif ?",type:"radio",key:"effectif",opts:["Moins de 10","10 à 49","50 à 249","250 à 499","500 et plus"]
				}
				,  {
					q:"Quel est votre secteur d’activité ?",type:"text",key:"secteur"
				}
				,  {
					q:"Votre entreprise a-t-elle une démarche RSE ?",type:"radio",key:"rse",opts:["Oui structurée","Oui en structuration","Projet futur","Non"]
				}
				,  {
					q:"Raisons d'une stratégie carbone ?",type:"checkbox",key:"raisons",opts:["Attentes clients","Obligations réglementaires","Réduire les coûts","Valoriser l'image","Conviction","Autre"]
				}
				 ]
			}
			, {
				title:"Niveau de maturité carbone",questions:[  {
					q:"Avez-vous un référent RSE/environnement ?",type:"radio",key:"referent",opts:["Oui","Non"]
				}
				,  {
					q:"Avez-vous fait des formations climat ?",type:"radio",key:"formations",opts:["Oui","Non"]
				}
				,  {
					q:"Collectez-vous ces données ?",type:"checkbox",key:"donnees",opts:["Énergie","Déplacements","Déchets","Autres ESG"]
				}
				,  {
					q:"Avez-vous déjà réalisé un Bilan Carbone ?",type:"radio",key:"bilan",opts:["Oui récemment","Oui il y a 3 ans+","Non"]
				}
				,  {
					q:"Actions spécifiques mises en place ?",type:"text",key:"actions"
				}
				,  {
					q:"Avez-vous bénéficié d'une aide d’État ?",type:"radio",key:"aide",opts:["Oui","Non"]
				}
				 ]
			}
			, {
				title:"Préparer l’avenir",questions:[  {
					q:"Qu’aimeriez-vous faire en priorité ?",type:"checkbox",key:"priorites",opts:["Réaliser un Bilan Carbone","Identifier des leviers","Former les équipes","Valoriser vos engagements","Autre"]
				}
				,  {
					q:"Souhaitez-vous être contacté par le Groupe Y ?",type:"radio",key:"contact",opts:["Oui","Non"]
				}
				 ]
			}
			];
			let step=0,answers={
			};
			const quiz=document.getElementById("quiz"),bar=document.getElementById("bar");
			function render(){
				 let s=data[step];
				 bar.style.width=((step)/data.length*100)+"%";
				 let html=`<h2>${
					s.title
				}
				</h2>`;
				 s.questions.forEach((q,i)=>{
					  html+=`<div class="question"><label class="label">${
						q.q
					}
					</label>`;
					  if(q.type=="text"){
						html+=`<input class="input-text" value="${answers[q.key]||""}" oninput="answers['${q.key}']=this.value">`;
						  
					}
					else if(q.type=="radio"){
						html+=`<div class="options">`+q.opts.map(o=>{
							let sel=answers[q.key]==o?"selected":"";
							return `<div class="option ${sel}" onclick="answers['${q.key}']='${o}';render()"> <input type='radio' ${
								sel?"checked":""
							}
							>${
								o
							}
							</div>`;
						}
						).join("")+`</div>`;
						  
					}
					else if(q.type=="checkbox"){
						let arr=answers[q.key]||[];
						html+=`<div class="options">`+q.opts.map(o=>{
							let sel=arr.includes(o)?"selected":"";
							return `<div class="option ${sel}" onclick="toggle('${q.key}','${o}')"><input type='checkbox' ${
								sel?"checked":""
							}
							>${
								o
							}
							</div>`;
						}
						).join("")+`</div>`;
						  
					}
					  html+="</div>";
					 
				});
				 html+=`<div class="navigation"> <button class="btn-nav btn-prev" onclick="prev()" ${
					step==0?"disabled":""
				}
				>← Précédent</button> <button class="btn-nav btn-next" onclick="next()">${
					step==data.length-1?"Voir la fiche":"Suivant →"
				}
				</button> </div>`;
				 quiz.innerHTML=html;
			}
			function toggle(k,v){
				answers[k]=answers[k]||[];
				let i=answers[k].indexOf(v);
				i>-1?answers[k].splice(i,1):answers[k].push(v);
				render();
			}
			function next(){
				 if(step<data.length-1){
					step++;
					render();
				}
				 else showResult();
			}
			function prev(){
				if(step>0){
					step--;
					render();
				}
			}
			function showResult(){
				 bar.style.width="100%";
				 let n=answers.nom||"Votre entreprise",s=answers.secteur||"Non renseigné",e=answers.effectif||"Non renseigné";
				 let html=`<div class='card'><h2> ${
					n
				}
				</h2><p>Fiche Diagnostic Carbone</p> <div class='info'> <div><strong>Secteur:</strong> ${
					s
				}
				</div> <div><strong>Effectif:</strong> ${
					e
				}
				</div> <div><strong>RSE:</strong> ${
					answers.rse||"?"
				}
				</div> <div><strong>Bilan Carbone:</strong> ${
					answers.bilan||"?"
				}
				</div> </div>`;
				 if(answers.priorites&&answers.priorites.length)  html+=`<h3> Priorités</h3><p>${
					answers.priorites.join(", ")
				}
				</p>`;
				 if(answers.raisons&&answers.raisons.length)  html+=`<h3> Motivations</h3><p>${
					answers.raisons.join(", ")
				}
				</p>`;
				 if(answers.actions)  html+=`<h3> Actions</h3><p>${
					answers.actions
				}
				</p>`;
				 if(answers.contact=="Oui")  html+=`<div class='badge'> Vous serez contacté par le Groupe Y</div>`;
				 html+=`<p style='margin-top:20px;color:#6b7280;font-size:13px'>Diagnostic généré le ${
					new Date().toLocaleDateString("fr-FR")
				}
				</p></div>`;
				 quiz.innerHTML=html;
			}
			render();
		</script>
	</body>
</html>

